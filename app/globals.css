/* === Tailwind v4 entry === */
@import "tailwindcss";

/* === Design tokens (AA+) === */
:root {
  --font-scale: 1.02;
  /* Mantén SIEMPRE el formato "tripletas HSL sin hsl()" si luego usas hsl(var(--...)) */
  --bg: 210 40% 98%;
  --fg: 222 47% 12%;
  --card: 0 0% 100%;
  --card-fg: 222 43% 14%;
  --muted: 215 32% 94%;
  --muted-fg: 215 18% 36%;
  --border: 214 30% 88%;
  --primary: 221 84% 56%;
  --primary-fg: 210 40% 98%;
  --secondary: 265 82% 61%;
  --secondary-fg: 210 40% 98%;
  --success: 142 72% 40%;
  --success-fg: 210 40% 98%;
  --danger: 0 72% 50%;
  --danger-fg: 210 40% 98%;
  --warning: 45 94% 50%;
  --warning-fg: 20 14% 5%;
  --contrast: 15 23 42;
  --ring: 60 130 246;
}

[data-theme="dark"], .dark {
  --bg: 222 47% 6%;
  --fg: 210 40% 96%;
  --card: 222 47% 11%;
  --card-fg: 214 32% 96%;
  --muted: 220 30% 18%;
  --muted-fg: 220 18% 72%;
  --border: 220 26% 28%;
  --primary: 220 82% 66%;
  --primary-fg: 222 47% 12%;
  --secondary: 266 76% 68%;
  --secondary-fg: 222 47% 12%;
  --success: 143 72% 52%;
  --success-fg: 210 40% 98%;
  --danger: 0 72% 55%;
  --danger-fg: 210 40% 98%;
  --warning: 48 96% 58%;
  --warning-fg: 222 47% 12%;
  --contrast: 248 250 252;
  --ring: 86 128 255;
}

/* ===== Base tipográfica y resets mínimos ===== */
@layer base {
  html { font-size: calc(16px * var(--font-scale)); } /* ← deja SOLO esta */

  body {
    background: hsl(var(--bg));
    color: hsl(var(--fg));
    font-family: var(--font-sans, ui-sans-serif, system-ui, -apple-system, "Inter", "Segoe UI", Roboto);
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
    margin: 0;
  }

  /* Tipografías globales */
  body { @apply text-base leading-relaxed; }
  h1 { @apply text-3xl font-semibold leading-tight; }
  h2 { @apply text-2xl font-semibold leading-snug; }
  h3 { @apply text-xl  font-semibold leading-snug; }
  p  { @apply leading-relaxed; }
  small { @apply text-xs sm:text-sm; }
}

/* ===== Componentes y utilidades propias ===== */
@layer components {
  /* Navbar */
  .navbar {
    position: sticky; top: 0; z-index: 40;
    backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
    background: hsl(var(--bg) / 0.88);
    border-bottom: 1px solid hsl(var(--border));
  }

  /* Cards genéricas */
  .card {
    @apply rounded-2xl border border-border bg-card text-card-foreground shadow-card transition-shadow duration-300 ease-soft;
  }
  .card:hover { @apply shadow-card-hover; }

  .card-hover { transition: transform .15s ease, box-shadow .15s ease; }
  .card-hover:hover { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(0,0,0,.06); }

  .shadow-elevated { box-shadow: 0 8px 28px rgba(0,0,0,.08); }
  .glass-card { @apply card; }

  /* Botón base */
  .btn-base { @apply inline-flex h-12 items-center justify-center gap-2 rounded-xl px-5 text-base font-semibold transition-all duration-200 ease-soft shadow-sm; }
  .btn-base:hover { @apply shadow-md; }
  .btn-base:active { transform: translateY(1px); }

  .glass-btn { @apply btn-base border border-border bg-muted text-foreground; }
  .glass-btn:hover { @apply bg-muted/80; }
  .glass-btn.primary { @apply bg-primary text-primary-foreground shadow-card; }
  .glass-btn.danger  { @apply bg-danger  text-danger-foreground; }
  .glass-btn.neon    { @apply bg-secondary text-secondary-foreground shadow-card; }

  /* Inputs */
  .input { @apply w-full rounded-xl border border-border bg-muted px-4 py-3 text-base text-foreground transition-shadow duration-200 ease-soft; }
  .input::placeholder { color: hsl(var(--muted-fg)); opacity: .7; }
  .input:focus { outline: none; box-shadow: 0 0 0 2px rgba(99,102,241,.25); }

  /* Badge */
  .badge { @apply inline-flex items-center gap-2 rounded-full bg-muted px-3 py-1 text-xs font-medium text-muted-foreground; }

  /* Helpers */
  .text-contrast     { color: rgb(var(--contrast)); }
  .text-contrast\/80 { color: rgb(var(--contrast) / .8); }
  .text-contrast\/70 { color: rgb(var(--contrast) / .7); }

  /* Emojis consistentes */
  .emoji {
    display: inline-block;
    font-size: 1.2em;
    line-height: 1;
  }

  /* ====== Tablas Pro: header sticky, altura de fila, hover ====== */
  .pro-table table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
  }
  .pro-table thead th {
    position: sticky;
    top: 0;
    background: var(--card);
    z-index: 2;
    box-shadow: 0 1px 0 var(--border);
  }
  .pro-table tbody tr { height: 56px; } /* 52–56px */
  .pro-table tbody tr:hover {
    background: color-mix(in oklab, var(--muted) 65%, transparent);
  }
  .pro-table th, .pro-table td {
    padding: 12px 16px; /* grid 8px: 16–24px coherente */
    border-bottom: 1px solid var(--border);
    vertical-align: middle;
  }

  /* ====== Chips de filtro ====== */
  .chips { display: flex; flex-wrap: wrap; gap: 8px; }
  .chip {
    display: inline-flex; align-items: center; gap: 6px;
    height: 34px; padding: 0 12px;
    border: 1px solid var(--border);
    border-radius: 999px;
    background: var(--background);
    color: var(--foreground);
    transition: background .15s ease, border-color .15s ease, transform .1s ease;
  }
  .chip[data-active="true"] {
    background: var(--primary);
    color: var(--primary-foreground);
    border-color: var(--primary);
  }
  .chip:active { transform: scale(.98); }

  /* ====== Skeleton / Loader ====== */
  .skeleton {
    background: linear-gradient(
      90deg,
      var(--muted) 25%,
      color-mix(in oklab, var(--muted) 90%, white) 37%,
      var(--muted) 63%
    );
    background-size: 400% 100%;
    animation: shimmer 1.2s infinite;
    border-radius: 8px;
  }
}

/* ===== Accesibilidad (focus visible) ===== */
*:focus-visible {
  outline: 3px solid rgb(var(--ring));
  outline-offset: 3px;
  box-shadow: 0 0 0 4px rgb(var(--ring) / 0.25);
}

/* ===== Efecto de fondo en modo dark (fuera de layers) ===== */
.dark body {
  background:
    radial-gradient(1200px 800px at 10% -20%, rgba(255,255,255,0.06), transparent 60%),
    radial-gradient(900px 600px at 120% 20%, rgba(86,156,214,0.15), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.15)),
    hsl(var(--bg));
  background-attachment: fixed;
}

/* ===== Animaciones ===== */
@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* === Tailwind v4 color mapping para tokens estilo shadcn === */
@theme {
  --color-background: hsl(var(--bg));
  --color-foreground: hsl(var(--fg));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-fg));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-fg));
  --color-border: hsl(var(--border));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-fg));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-fg));
  --color-success: hsl(var(--success));
  --color-success-foreground: hsl(var(--success-fg));
  --color-danger: hsl(var(--danger));
  --color-danger-foreground: hsl(var(--danger-fg));
  --color-warning: hsl(var(--warning));
  --color-warning-foreground: hsl(var(--warning-fg));
}

/* Aliases de compatibilidad para secciones CSS que usan --background/--foreground */
:root { --background: hsl(var(--bg)); --foreground: hsl(var(--fg)); }
.dark  { --background: hsl(var(--bg)); --foreground: hsl(var(--fg)); }

/* === Utilidades personalizadas (Tailwind v4) === */
@utility ease-soft {
  transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1); /* “soft” ease-out */
}

/* === Utilidades personalizadas (Tailwind v4) === */

/* Curva de salida “suave” para transiciones */
@utility ease-soft {
  transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
}

/* Sombra base para tarjetas */
@utility shadow-card {
  box-shadow:
    0 1px 2px rgba(16, 24, 40, 0.04),
    0 1px 1px rgba(16, 24, 40, 0.06);
}

/* Sombra al hover (más profunda) */
@utility shadow-card-hover {
  box-shadow:
    0 8px 24px rgba(16, 24, 40, 0.08),
    0 4px 12px rgba(16, 24, 40, 0.06);
}

/* Transición cómoda para tarjetas (opcional) */
@utility transition-card {
  transition-property: transform, box-shadow, background-color, color, border-color;
  transition-duration: 200ms;
}

/* Ejemplo de “hover lift” (opcional) */
@utility hover-lift:hover {
  transform: translateY(-2px);
}
